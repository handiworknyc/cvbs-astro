---
const vtName = "demo-title";
---
<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>VT B</title>
    <style>
      h1 { font: 900 clamp(40px, 8vw, 72px)/1.05 system-ui; }
      a  { display:inline-block; view-transition-name: demo-title; }

      ::view-transition-old(root), ::view-transition-new(root) {
        animation-duration: 350ms;
        animation-timing-function: cubic-bezier(.2,.8,.2,1);
      }
    </style>
  </head>
  <body>
    <h1><a href="/vt-a">B â†’ A</a></h1>

    <script is:inline>
      function onClick(e) {
        const a = e.target.closest?.('a[href]');
        if (!a) return;
        const url = new URL(a.href, location.href);
        if (url.origin !== location.origin) return;
        if (a.target === '_blank' || e.metaKey || e.ctrlKey || e.shiftKey || e.altKey) return;

        e.preventDefault();
        const go = () => { location.href = url.href; };

        console.log('[VT-B] intercept', url.href);
        if ('startViewTransition' in document) {
          document.startViewTransition(go);
        } else {
          go();
        }
      }
      document.addEventListener('click', onClick, { capture: true });
    </script>
  </body>
</html>
